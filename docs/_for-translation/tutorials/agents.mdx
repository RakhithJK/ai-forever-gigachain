# –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

–°–∞–º–∏ –ø–æ —Å–µ–±–µ —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–µ–π—Å—Ç–≤–∏—è ‚Äî –æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥—è—Ç —Ç–µ–∫—Å—Ç.
–û–¥–Ω–∏–º –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è LangChain —è–≤–ª—è–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ **–∞–≥–µ–Ω—Ç–æ–≤**.
–ê–≥–µ–Ω—Ç—ã ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç LLM –≤ –∫–∞—á–µ—Å—Ç–≤–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—å –∏ –∫–∞–∫–∏–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç—Ç–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã.
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç—Ç–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –∑–∞—Ç–µ–º –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—Ä–∞—Ç–Ω–æ –∞–≥–µ–Ω—Ç—É, —á—Ç–æ–±—ã –æ–Ω –æ–ø—Ä–µ–¥–µ–ª–∏–ª, –Ω—É–∂–Ω—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∏–ª–∏ –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

–í —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –º—ã —Å–æ–∑–¥–∞–¥–∏–º –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏: –æ–¥–Ω–∏–º –∏–∑ –Ω–∏—Ö –±—É–¥–µ—Ç –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –¥—Ä—É–≥–∏–º ‚Äî –ø–æ–∏—Å–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞. –í—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å —ç—Ç–æ–º—É –∞–≥–µ–Ω—Ç—É –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞–±–ª—é–¥–∞—Ç—å, –∫–∞–∫ –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∏ –≤–µ—Å—Ç–∏ —Å –Ω–∏–º –±–µ—Å–µ–¥—ã.

## –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏

–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [—è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π](/docs/concepts/#chat-models), –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫ –≤—ã–∑–æ–≤—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ [–†–µ—Ç—Ä–∏–≤–µ—Ä–∞](/docs/concepts/#retrievers) –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞](/docs/concepts/#tools) –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ [–ê–≥–µ–Ω—Ç–æ–≤ LangGraph](/docs/concepts/#agents), –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç LLM –¥–ª—è –æ–±–¥—É–º—ã–≤–∞–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ –¥–µ–ª–∞—Ç—å, –∞ –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç —ç—Ç–æ
- –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é [LangSmith](/docs/concepts/#langsmith)

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### Jupyter-–±–ª–æ–∫–Ω–æ—Ç—ã

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, –∫–∞–∫ –∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [Jupyter-–±–ª–æ–∫–Ω–æ—Ç—ã](https://jupyter.org/). –û–Ω–∏ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å LLM-—Å–∏—Å—Ç–µ–º–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å—Ä–µ–¥—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞–º–∏ –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–º–∏ —Å–∏—Ç—É–∞—Ü–∏—è–º–∏: –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é API, –Ω–µ—Ç–∏–ø–∏—á–Ω—ã–º –≤—ã–≤–æ–¥–æ–º –∏ –¥—Ä—É–≥–∏–º–∏.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ jupyter -- –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://jupyter.org/install).

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ GigaChain –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```{=mdx}
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from "@theme/CodeBlock";

<Tabs>
  <TabItem value="pip" label="Pip" default>
    <CodeBlock language="bash">pip install langchain</CodeBlock>
  </TabItem>
  <TabItem value="conda" label="Conda">
    <CodeBlock language="bash">conda install langchain -c conda-forge</CodeBlock>
  </TabItem>
</Tabs>
```


–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ -- –≤ —Ä–∞–∑–¥–µ–ª–µ [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](https://developers.sber.ru/docs/ru/gigachain/get-started/installation).

<!--
### LangSmith

–ú–Ω–æ–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ —Å –ø–æ–º–æ—â—å—é LangChain, –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ —Å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏ LLM.
–ü–æ –º–µ—Ä–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∞–∂–Ω–æ –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–π —Ü–µ–ø–æ—á–∫–∏ –∏–ª–∏ –∞–≥–µ–Ω—Ç–∞.
–õ—É—á—à–∏–π —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ ‚Äî —Å –ø–æ–º–æ—â—å—é [LangSmith](https://smith.langchain.com).

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Å—ã–ª–∫–µ –≤—ã—à–µ, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –¥–ª—è –Ω–∞—á–∞–ª–∞ –≤–µ–¥–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–æ–∫:

```shell
export LANGCHAIN_TRACING_V2="true"
export LANGCHAIN_API_KEY="..."
```

–ò–ª–∏, –µ—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –Ω–æ—É—Ç–±—É–∫–µ, –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö —Å –ø–æ–º–æ—â—å—é:

```python
import getpass
import os

os.environ["LANGCHAIN_TRACING_V2"] = "true"
os.environ["LANGCHAIN_API_KEY"] = getpass.getpass()
```
-->

## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–°–Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞: [Tavily](/docs/integrations/tools/tavily_search) (–¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ) –∏ —Ä–µ—Ç—Ä–∏–≤–µ—Ä –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–æ–∑–¥–∞–¥–∏–º.

### [Tavily](/docs/integrations/tools/tavily_search)

–í LangChain –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã Tavily –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è API-–∫–ª—é—á ‚Äî —É –Ω–∏—Ö –µ—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å, –Ω–æ –µ—Å–ª–∏ —É –≤–∞—Å –µ–≥–æ –Ω–µ—Ç –∏–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ –µ–≥–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å, –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —à–∞–≥.

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è API-–∫–ª—é—á–∞ –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```bash
export TAVILY_API_KEY="..."
```

```python
from langchain_community.tools.tavily_search import TavilySearchResults
```

```python
search = TavilySearchResults(max_results=2)
```

```python
search.invoke("what is the weather in SF")
```

<CodeOutputBlock lang="python">

```python
    [{'url': 'https://weather.com/weather/tenday/l/San Francisco CA USCA0987:1:US',
  'content': "Comfy & Cozy\nThat's Not What Was Expected\nOutside\n'No-Name Storms' In Florida\nGifts From On High\nWhat To Do For Wheezing\nSurviving The Season\nStay Safe\nAir Quality Index\nAir quality is considered satisfactory, and air pollution poses little or no risk.\n Health & Activities\nSeasonal Allergies and Pollen Count Forecast\nNo pollen detected in your area\nCold & Flu Forecast\nFlu risk is low in your area\nWe recognize our responsibility to use data and technology for good. recents\nSpecialty Forecasts\n10 Day Weather-San Francisco, CA\nToday\nMon 18 | Day\nConsiderable cloudiness. Tue 19\nTue 19 | Day\nLight rain early...then remaining cloudy with showers in the afternoon. Wed 27\nWed 27 | Day\nOvercast with rain showers at times."},
 {'url': 'https://www.accuweather.com/en/us/san-francisco/94103/hourly-weather-forecast/347629',
  'content': 'Hourly weather forecast in San Francisco, CA. Check current conditions in San Francisco, CA with radar, hourly, and more.'}]
```

</CodeOutputBlock>

### –†–µ—Ç—Ä–∏–≤–µ—Ä

–ú—ã —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–¥–∏–º —Ä–µ—Ç—Ä–∏–≤–µ—Ä –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –î–ª—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ —Å–º. [—ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](/docs/tutorials/rag).

```python
from langchain_community.document_loaders import WebBaseLoader
from langchain_community.vectorstores import FAISS
from langchain_openai import OpenAIEmbeddings
from langchain_text_splitters import RecursiveCharacterTextSplitter

loader = WebBaseLoader("https://docs.smith.langchain.com/overview")
docs = loader.load()
documents = RecursiveCharacterTextSplitter(
    chunk_size=1000, chunk_overlap=200
).split_documents(docs)
vector = FAISS.from_documents(documents, OpenAIEmbeddings())
retriever = vector.as_retriever()
```

```python
retriever.invoke("how to upload a dataset")[0]
```

<CodeOutputBlock lang="python">

```python
    Document(page_content='import Clientfrom langsmith.evaluation import evaluateclient = Client()# Define dataset: these are your test casesdataset_name = "Sample Dataset"dataset = client.create_dataset(dataset_name, description="A sample dataset in LangSmith.")client.create_examples(    inputs=[        {"postfix": "to LangSmith"},        {"postfix": "to Evaluations in LangSmith"},    ],    outputs=[        {"output": "Welcome to LangSmith"},        {"output": "Welcome to Evaluations in LangSmith"},    ],    dataset_id=dataset.id,)# Define your evaluatordef exact_match(run, example):    return {"score": run.outputs["output"] == example.outputs["output"]}experiment_results = evaluate(    lambda input: "Welcome " + input[\'postfix\'], # Your AI system goes here    data=dataset_name, # The data to predict and grade over    evaluators=[exact_match], # The evaluators to score the results    experiment_prefix="sample-experiment", # The name of the experiment    metadata={      "version": "1.0.0",      "revision_id":', metadata={'source': 'https://docs.smith.langchain.com/overview', 'title': 'Getting started with LangSmith | ü¶úÔ∏èüõ†Ô∏è LangSmith', 'description': 'Introduction', 'language': 'en'})
```

</CodeOutputBlock>

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –Ω–∞—à –∏–Ω–¥–µ–∫—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–∏—Å–∫, –º—ã –º–æ–∂–µ–º –ª–µ–≥–∫–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –µ–≥–æ –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (—Ñ–æ—Ä–º–∞—Ç, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–º)

```python
from langchain.tools.retriever import create_retriever_tool
```

```python
retriever_tool = create_retriever_tool(
    retriever,
    "langsmith_search",
    "Search for information about LangSmith. For any questions about LangSmith, you must use this tool!",
)
```

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã —Å–æ–∑–¥–∞–ª–∏ –æ–±–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–ª–µ–µ.

```python
tools = [search, retriever_tool]
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —É–∑–Ω–∞–µ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —è–∑—ã–∫–æ–≤—É—é –º–æ–¥–µ–ª—å –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. LangChain –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º–æ ‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ —Ç—É, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏–∂–µ!

```{=mdx}
import ChatModelTabs from "@theme/ChatModelTabs";

<ChatModelTabs openaiParams={`model="gpt-4"`} />
```

```python
# | output: false
# | echo: false

from langchain_openai import ChatOpenAI

model = ChatOpenAI(model="gpt-4")
```

–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å —è–∑—ã–∫–æ–≤—É—é –º–æ–¥–µ–ª—å, –ø–µ—Ä–µ–¥–∞–≤ —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–≤–µ—Ç–æ–º –±—É–¥–µ—Ç —Å—Ç—Ä–æ–∫–∞ `content`.

```python
from langchain_core.messages import HumanMessage

response = model.invoke([HumanMessage(content="hi!")])
response.content
```

<CodeOutputBlock lang="python">

```python
    'Hello! How can I assist you today?'
```

</CodeOutputBlock>

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –≤–∫–ª—é—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —ç—Ç–æ–π –º–æ–¥–µ–ª–∏. –ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å —ç—Ç–æ, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `.bind_tools`, —á—Ç–æ–±—ã –¥–∞—Ç—å —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –∑–Ω–∞–Ω–∏–µ —ç—Ç–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

```python
model_with_tools = model.bind_tools(tools)
```

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –≤—ã–∑–≤–∞—Ç—å –º–æ–¥–µ–ª—å. –°–Ω–∞—á–∞–ª–∞ –≤—ã–∑–æ–≤–µ–º –µ—ë —Å –æ–±—ã—á–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –æ–Ω–∞ –æ—Ç–≤–µ—Ç–∏—Ç. –ú—ã –º–æ–∂–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ –Ω–∞ –ø–æ–ª–µ `content`, —Ç–∞–∫ –∏ –Ω–∞ –ø–æ–ª–µ `tool_calls`.

```python
response = model_with_tools.invoke([HumanMessage(content="Hi!")])

print(f"ContentString: {response.content}")
print(f"ToolCalls: {response.tool_calls}")
```

<CodeOutputBlock lang="python">

```default
    ContentString: Hello! How can I assist you today?
    ToolCalls: []
```

</CodeOutputBlock>

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º –≤—ã–∑–≤–∞—Ç—å –µ—ë —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –≤–≤–æ–¥–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.

```python
response = model_with_tools.invoke([HumanMessage(content="What's the weather in SF?")])

print(f"ContentString: {response.content}")
print(f"ToolCalls: {response.tool_calls}")
```

<CodeOutputBlock lang="python">

```default
    ContentString: 
    ToolCalls: [{'name': 'tavily_search_results_json', 'args': {'query': 'current weather in SF'}, 'id': 'call_nfE1XbCqZ8eJsB8rNdn4MQZQ'}]
```

</CodeOutputBlock>

–ú—ã –≤–∏–¥–∏–º, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –Ω–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –Ω–æ –µ—Å—Ç—å –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞! –û–Ω–∞ —Ö–æ—á–µ—Ç, —á—Ç–æ–±—ã –º—ã –≤—ã–∑–≤–∞–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Tavily Search.

–≠—Ç–æ –µ—â–µ –Ω–µ –≤—ã–∑–æ–≤ —ç—Ç–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ ‚Äî –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –Ω–∞–º –æ–± —ç—Ç–æ–º. –ß—Ç–æ–±—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞—Ç—å –µ–≥–æ, –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–∞—à–µ–≥–æ –∞–≥–µ–Ω—Ç–∞.

## –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ LLM, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞. –ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [LangGraph](/docs/concepts/#langgraph) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞.
–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞, –Ω–æ —Ö–æ—Ä–æ—à–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π LangGraph —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ —ç—Ç–æ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º, –≤—ã—Å–æ–∫–æ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º API, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –∞–≥–µ–Ω—Ç–∞.
–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é LLM –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–µ–º `model`, –∞ –Ω–µ `model_with_tools`. –≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ `create_tool_calling_executor` –≤—ã–∑–æ–≤–µ—Ç `.bind_tools` –∑–∞ –Ω–∞—Å –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º.

```python
from langgraph.prebuilt import chat_agent_executor

agent_executor = chat_agent_executor.create_tool_calling_executor(model, tools)
```

## –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö! –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø–æ–∫–∞ –≤—Å–µ —ç—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã **–±–µ–∑–¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ** (–æ–Ω –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è). –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∞–≥–µ–Ω—Ç –≤–µ—Ä–Ω–µ—Ç **–æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ** —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–æ–Ω—Ü–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–≤–∫–ª—é—á–∞—é—â–µ–µ –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–∑–∂–µ –º—ã —É–≤–∏–¥–∏–º, –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ).

–°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –æ–Ω –æ—Ç–≤–µ—á–∞–µ—Ç, –∫–æ–≥–¥–∞ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:

```python
response = agent_executor.invoke({"messages": [HumanMessage(content="hi!")]})

response["messages"]
```

<CodeOutputBlock lang="python">

```python
    [HumanMessage(content='hi!', id='1535b889-10a5-45d0-a1e1-dd2e60d4bc04'),
 AIMessage(content='Hello! How can I assist you today?', response_metadata={'token_usage': {'completion_tokens': 10, 'prompt_tokens': 129, 'total_tokens': 139}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None}, id='run-2c94c074-bdc9-4f01-8fd7-71cfc4777d55-0')]
```

</CodeOutputBlock>

–ß—Ç–æ–±—ã —Ç–æ—á–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º (–∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è), –º—ã –º–æ–∂–µ–º –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ [—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É LangSmith](https://smith.langchain.com/public/28311faa-e135-4d6a-ab6b-caecf6482aaa/r).

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–∏–º–µ—Ä, –≥–¥–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–∑–≤–∞—Ç—å —Ä–µ—Ç—Ä–∏–≤–µ—Ä.

```python
response = agent_executor.invoke(
    {"messages": [HumanMessage(content="how can langsmith help with testing?")]}
)
response["messages"]
```

<CodeOutputBlock lang="python">

```python
    [HumanMessage(content='how can langsmith help with testing?', id='04f4fe8f-391a-427c-88af-1fa064db304c'),
 AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_FNIgdO97wo51sKx3XZOGLHqT', 'function': {'arguments': '{\n  "query": "how can LangSmith help with testing"\n}', 'name': 'langsmith_search'}, 'type': 'function'}]}, response_metadata={'token_usage': {'completion_tokens': 22, 'prompt_tokens': 135, 'total_tokens': 157}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-51f6ea92-84e1-43a5-b1f2-bc0c12d8613f-0', tool_calls=[{'name': 'langsmith_search', 'args': {'query': 'how can LangSmith help with testing'}, 'id': 'call_FNIgdO97wo51sKx3XZOGLHqT'}]),
 ToolMessage(content="Getting started with LangSmith | ü¶úÔ∏èüõ†Ô∏è LangSmith\n\nSkip to main contentLangSmith API DocsSearchGo to AppQuick StartUser GuideTracingEvaluationProduction Monitoring & AutomationsPrompt HubProxyPricingSelf-HostingCookbookQuick StartOn this pageGetting started with LangSmithIntroduction\u200bLangSmith is a platform for building production-grade LLM applications. It allows you to closely monitor and evaluate your application, so you can ship quickly and with confidence. Use of LangChain is not necessary - LangSmith works on its own!Install LangSmith\u200bWe offer Python and Typescript SDKs for all your LangSmith needs.PythonTypeScriptpip install -U langsmithyarn add langchain langsmithCreate an API key\u200bTo create an API key head to the setting pages. Then click Create API Key.Setup your environment\u200bShellexport LANGCHAIN_TRACING_V2=trueexport LANGCHAIN_API_KEY=<your-api-key># The below examples use the OpenAI API, though it's not necessary in generalexport OPENAI_API_KEY=<your-openai-api-key>Log your first trace\u200bWe provide multiple ways to log traces\n\nLearn about the workflows LangSmith supports at each stage of the LLM application lifecycle.Pricing: Learn about the pricing model for LangSmith.Self-Hosting: Learn about self-hosting options for LangSmith.Proxy: Learn about the proxy capabilities of LangSmith.Tracing: Learn about the tracing capabilities of LangSmith.Evaluation: Learn about the evaluation capabilities of LangSmith.Prompt Hub Learn about the Prompt Hub, a prompt management tool built into LangSmith.Additional Resources\u200bLangSmith Cookbook: A collection of tutorials and end-to-end walkthroughs using LangSmith.LangChain Python: Docs for the Python LangChain library.LangChain Python API Reference: documentation to review the core APIs of LangChain.LangChain JS: Docs for the TypeScript LangChain libraryDiscord: Join us on our Discord to discuss all things LangChain!FAQ\u200bHow do I migrate projects between organizations?\u200bCurrently we do not support project migration betwen organizations. While you can manually imitate this by\n\nteam deals with sensitive data that cannot be logged. How can I ensure that only my team can access it?\u200bIf you are interested in a private deployment of LangSmith or if you need to self-host, please reach out to us at sales@langchain.dev. Self-hosting LangSmith requires an annual enterprise license that also comes with support and formalized access to the LangChain team.Was this page helpful?NextUser GuideIntroductionInstall LangSmithCreate an API keySetup your environmentLog your first traceCreate your first evaluationNext StepsAdditional ResourcesFAQHow do I migrate projects between organizations?Why aren't my runs aren't showing up in my project?My team deals with sensitive data that cannot be logged. How can I ensure that only my team can access it?CommunityDiscordTwitterGitHubDocs CodeLangSmith SDKPythonJS/TSMoreHomepageBlogLangChain Python DocsLangChain JS/TS DocsCopyright ¬© 2024 LangChain, Inc.", name='langsmith_search', id='f286c7e7-6514-4621-ac60-e4079b37ebe2', tool_call_id='call_FNIgdO97wo51sKx3XZOGLHqT'),
 AIMessage(content="LangSmith is a platform that can significantly aid in testing by offering several features:\n\n1. **Tracing**: LangSmith provides robust tracing capabilities that enable you to monitor your application closely. This feature is particularly useful for tracking the behavior of your application and identifying any potential issues.\n\n2. **Evaluation**: LangSmith allows you to perform comprehensive evaluations of your application. This can help you assess the performance of your application under various conditions and make necessary adjustments to enhance its functionality.\n\n3. **Production Monitoring & Automations**: With LangSmith, you can keep a close eye on your application when it's in active use. The platform provides tools for automatic monitoring and managing routine tasks, helping to ensure your application runs smoothly.\n\n4. **Prompt Hub**: It's a prompt management tool built into LangSmith. This feature can be instrumental when testing various prompts in your application.\n\nOverall, LangSmith helps you build production-grade LLM applications with confidence, providing necessary tools for monitoring, evaluation, and automation.", response_metadata={'token_usage': {'completion_tokens': 200, 'prompt_tokens': 782, 'total_tokens': 982}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None}, id='run-4b80db7e-9a26-4043-8b6b-922f847f9c80-0')]
```

</CodeOutputBlock>

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ [—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É LangSmith](https://smith.langchain.com/public/853f62d0-3421-4dba-b30a-7277ce2bdcdf/r), —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –ø–æ–ª—É—á–∞–µ–º –≤ –∫–æ–Ω—Ü–µ, —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–∏–º–µ—Ä, –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∏—Å–∫–∞:

```python
response = agent_executor.invoke(
    {"messages": [HumanMessage(content="whats the weather in sf?")]}
)
response["messages"]
```

<CodeOutputBlock lang="python">

```python
    [HumanMessage(content='whats the weather in sf?', id='e6b716e6-da57-41de-a227-fee281fda588'),
 AIMessage(content='', additional_kwargs={'tool_calls': [{'id

': 'call_TGDKm0saxuGKJD5OYOXWRvLe', 'function': {'arguments': '{\n  "query": "current weather in San Francisco"\n}', 'name': 'tavily_search_results_json'}, 'type': 'function'}]}, response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 134, 'total_tokens': 157}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-fd7d5854-2eab-4fca-ad9e-b3de8d587614-0', tool_calls=[{'name': 'tavily_search_results_json', 'args': {'query': 'current weather in San Francisco'}, 'id': 'call_TGDKm0saxuGKJD5OYOXWRvLe'}]),
 ToolMessage(content='[{"url": "https://www.weatherapi.com/", "content": "{\'location\': {\'name\': \'San Francisco\', \'region\': \'California\', \'country\': \'United States of America\', \'lat\': 37.78, \'lon\': -122.42, \'tz_id\': \'America/Los_Angeles\', \'localtime_epoch\': 1714426800, \'localtime\': \'2024-04-29 14:40\'}, \'current\': {\'last_updated_epoch\': 1714426200, \'last_updated\': \'2024-04-29 14:30\', \'temp_c\': 17.8, \'temp_f\': 64.0, \'is_day\': 1, \'condition\': {\'text\': \'Sunny\', \'icon\': \'//cdn.weatherapi.com/weather/64x64/day/113.png\', \'code\': 1000}, \'wind_mph\': 23.0, \'wind_kph\': 37.1, \'wind_degree\': 290, \'wind_dir\': \'WNW\', \'pressure_mb\': 1019.0, \'pressure_in\': 30.09, \'precip_mm\': 0.0, \'precip_in\': 0.0, \'humidity\': 50, \'cloud\': 0, \'feelslike_c\': 17.8, \'feelslike_f\': 64.0, \'vis_km\': 16.0, \'vis_miles\': 9.0, \'uv\': 5.0, \'gust_mph\': 27.5, \'gust_kph\': 44.3}}"}, {"url": "https://www.wunderground.com/hourly/us/ca/san-francisco/94125/date/2024-4-29", "content": "Current Weather for Popular Cities . San Francisco, CA warning 59 \\u00b0 F Mostly Cloudy; Manhattan, NY 56 \\u00b0 F Fair; Schiller Park, IL (60176) warning 58 \\u00b0 F Mostly Cloudy; Boston, MA 52 \\u00b0 F Sunny ..."}]', name='tavily_search_results_json', id='aa0d8c3d-23b5-425a-ad05-3c174fc04892', tool_call_id='call_TGDKm0saxuGKJD5OYOXWRvLe'),
 AIMessage(content='The current weather in San Francisco, California is sunny with a temperature of 64.0¬∞F (17.8¬∞C). The wind is coming from the WNW at a speed of 23.0 mph. The humidity level is at 50%. There is no precipitation and the cloud cover is 0%. The visibility is 16.0 km. The UV index is 5.0. Please note that this information is as of 14:30 on April 29, 2024, according to [Weather API](https://www.weatherapi.com/).', response_metadata={'token_usage': {'completion_tokens': 117, 'prompt_tokens': 620, 'total_tokens': 737}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None}, id='run-2359b41b-cab6-40c3-b6d9-7bdf7195a601-0')]
```

</CodeOutputBlock>

–ú—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å [—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É LangSmith](https://smith.langchain.com/public/f520839d-cd4d-4495-8764-e32b548e235d/r), —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∏—Å–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

## –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

–ú—ã –≤–∏–¥–µ–ª–∏, –∫–∞–∫ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é `.invoke`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç. –ï—Å–ª–∏ –∞–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤, —ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è. –ß—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å, –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –º–µ—Ä–µ –∏—Ö –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è.

```python
for chunk in agent_executor.stream(
    {"messages": [HumanMessage(content="whats the weather in sf?")]}
):
    print(chunk)
    print("----")
```


<CodeOutputBlock lang="python">

```default
    {'agent': {'messages': [AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_50Kb8zHmFqPYavQwF5TgcOH8', 'function': {'arguments': '{\n  "query": "current weather in San Francisco"\n}', 'name': 'tavily_search_results_json'}, 'type': 'function'}]}, response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 134, 'total_tokens': 157}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run-042d5feb-c2cc-4c3f-b8fd-dbc22fd0bc07-0', tool_calls=[{'name': 'tavily_search_results_json', 'args': {'query': 'current weather in San Francisco'}, 'id': 'call_50Kb8zHmFqPYavQwF5TgcOH8'}])]}}
    ----
    {'action': {'messages': [ToolMessage(content='[{"url": "https://www.weatherapi.com/", "content": "{\'location\': {\'name\': \'San Francisco\', \'region\': \'California\', \'country\': \'United States of America\', \'lat\': 37.78, \'lon\': -122.42, \'tz_id\': \'America/Los_Angeles\', \'localtime_epoch\': 1714426906, \'localtime\': \'2024-04-29 14:41\'}, \'current\': {\'last_updated_epoch\': 1714426200, \'last_updated\': \'2024-04-29 14:30\', \'temp_c\': 17.8, \'temp_f\': 64.0, \'is_day\': 1, \'condition\': {\'text\': \'Sunny\', \'icon\': \'//cdn.weatherapi.com/weather/64x64/day/113.png\', \'code\': 1000}, \'wind_mph\': 23.0, \'wind_kph\': 37.1, \'wind_degree\': 290, \'wind_dir\': \'WNW\', \'pressure_mb\': 1019.0, \'pressure_in\': 30.09, \'precip_mm\': 0.0, \'precip_in\': 0.0, \'humidity\': 50, \'cloud\': 0, \'feelslike_c\': 17.8, \'feelslike_f\': 64.0, \'vis_km\': 16.0, \'vis_miles\': 9.0, \'uv\': 5.0, \'gust_mph\': 27.5, \'gust_kph\': 44.3}}"}, {"url": "https://world-weather.info/forecast/usa/san_francisco/april-2024/", "content": "Extended weather forecast in San Francisco. Hourly Week 10 days 14 days 30 days Year. Detailed \\u26a1 San Francisco Weather Forecast for April 2024 - day/night \\ud83c\\udf21\\ufe0f temperatures, precipitations - World-Weather.info."}]', name='tavily_search_results_json', id='d88320ac-3fe1-4f73-870a-3681f15f6982', tool_call_id='call_50Kb8zHmFqPYavQwF5TgcOH8')]}}
    ----
    {'agent': {'messages': [AIMessage(content='The current weather in San Francisco, California is sunny with a temperature of 17.8¬∞C (64.0¬∞F). The wind is coming from the WNW at 23.0 mph. The humidity is at 50%. [source](https://www.weatherapi.com/)', response_metadata={'token_usage': {'completion_tokens': 58, 'prompt_tokens': 602, 'total_tokens': 660}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None}, id='run-0cd2a507-ded5-4601-afe3-3807400e9989-0')]}}
    ----
```

</CodeOutputBlock>

## –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤

–ö—Ä–æ–º–µ –ø–æ—Ç–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç–∞–∫–∂–µ –ø–æ–ª–µ–∑–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã.
–ú—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `.astream_events`.

:::{.callout-important}
–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ `.astream_events` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å Python 3.11 –∏–ª–∏ –≤—ã—à–µ.
:::

```python
async for event in agent_executor.astream_events(
    {"messages": [HumanMessage(content="whats the weather in sf?")]}, version="v1"
):
    kind = event["event"]
    if kind == "on_chain_start":
        if (
            event["name"] == "Agent"
        ):  # –ë—ã–ª–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞ —Å `.with_config({"run_name": "Agent"})`
            print(
                f"Starting agent: {event['name']} with input: {event['data'].get('input')}"
            )
    elif kind == "on_chain_end":
        if (
            event["name"] == "Agent"
        ):  # –ë—ã–ª–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥–µ–Ω—Ç–∞ —Å `.with_config({"run_name": "Agent"})`
            print()
            print("--")
            print(
                f"Done agent: {event['name']} with output: {event['data'].get('output')['output']}"
            )
    if kind == "on_chat_model_stream":
        content = event["data"]["chunk"].content
        if content:
            # –ü—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ OpenAI –æ–∑–Ω–∞—á–∞–µ—Ç,
            # —á—Ç–æ –º–æ–¥–µ–ª—å –ø—Ä–æ—Å–∏—Ç –≤—ã–∑–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.
            # –ü–æ—ç—Ç–æ–º—É –º—ã –≤—ã–≤–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –Ω–µ–ø—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
            print(content, end="|")
    elif kind == "on_tool_start":
        print("--")
        print(
            f"Starting tool: {event['name']} with inputs: {event['data'].get('input')}"
        )
    elif kind == "on_tool_end":
        print(f"Done tool: {event['name']}")
        print(f"Tool output was: {event['data'].get('output')}")
        print("--")
```


<CodeOutputBlock lang="python">

```default
    --
    Starting tool: tavily_search_results_json with inputs: {'query': 'current weather in San Francisco'}
    Done tool: tavily_search_results_json
    Tool output was: [{'url': 'https://www.weatherapi.com/', 'content': "{'location': {'name': 'San Francisco', 'region': 'California', 'country': 'United States of America', 'lat': 37.78, 'lon': -122.42, 'tz_id': 'America/Los_Angeles', 'localtime_epoch': 1714427052, 'localtime': '2024-04-29 14:44'}, 'current': {'last_updated_epoch': 1714426200, 'last_updated': '2024-04-29 14:30', 'temp_c': 17.8, 'temp_f': 64.0, 'is_day': 1, 'condition': {'text': 'Sunny', 'icon': '//cdn.weatherapi.com/weather/64x64/day/113.png', 'code': 1000}, 'wind_mph': 23.0, 'wind_kph': 37.1, 'wind_degree': 290, 'wind_dir': 'WNW', 'pressure_mb': 1019.0, 'pressure_in': 30.09, 'precip_mm': 0.0, 'precip_in': 0.0, 'humidity': 50, 'cloud': 0, 'feelslike_c': 17.8, 'feelslike_f': 64.0, 'vis_km': 16.0, 'vis_miles': 9.0, 'uv': 5.0, 'gust_mph': 27.5, 'gust_kph': 44.3}}"}, {'url': 'https://www.weathertab.com/en/c/e/04/united-states/california/san-francisco/', 'content': 'San Francisco Weather Forecast for Apr 2024 - Risk of Rain Graph. Rain Risk Graph: Monthly Overview. Bar heights indicate rain risk percentages. Yellow bars mark low-risk days, while black and grey bars signal higher risks. Grey-yellow bars act as buffers, advising to keep at least one day clear from the riskier grey and black days, guiding ...'}]
    --
    The| current| weather| in| San| Francisco|,| California|,| USA| is| sunny| with| a| temperature| of| |17|.|8|¬∞C| (|64|.|0|¬∞F|).| The| wind| is| blowing| from| the| W|NW| at| a| speed| of| |37|.|1| k|ph| (|23|.|0| mph|).| The| humidity| level| is| at| |50|%.| [|Source|](|https|://|www|.weather|api|.com|/)|
```

</CodeOutputBlock>

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

–ö–∞–∫ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å —Ä–∞–Ω–µ–µ, —ç—Ç–æ—Ç –∞–≥–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –±–µ–∑–¥–µ—Å–ª–æ–≤–µ—Å–Ω—ã–º. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –Ω–µ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –µ–º—É –ø–∞–º—è—Ç—å, –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–º—É —á–µ–∫–ø–æ–π–Ω—Ç–µ—Ä. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —á–µ–∫–ø–æ–π–Ω—Ç–µ—Ä–∞, –Ω–∞–º —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å `thread_id` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∞–≥–µ–Ω—Ç–∞ (—á—Ç–æ–±—ã –æ–Ω –∑–Ω–∞–ª, —Å –∫–∞–∫–æ–π –≤–µ—Ç–∫–∏/—Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å).

```python
from langgraph.checkpoint.sqlite import SqliteSaver

memory = SqliteSaver.from_conn_string(":memory:")
```

```python
agent_executor = chat_agent_executor.create_tool_calling_executor(
    model, tools, checkpointer=memory
)

config = {"configurable": {"thread_id": "abc123"}}
```

```python
for chunk in agent_executor.stream(
    {"messages": [HumanMessage(content="hi im bob!")]}, config
):
    print(chunk)
    print("----")
```


<CodeOutputBlock lang="python">

```default
    {'agent': {'messages': [AIMessage(content='Hello Bob! How can I assist you today?', response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 131, 'total_tokens': 142}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None}, id='run-607733e3-4b8d-4137-ae66-8a4b8ccc8d40-0')]}}
    ----
```

</CodeOutputBlock>


```python
for chunk in agent_executor.stream(
    {"messages": [HumanMessage(content="whats my name?")]}, config
):
    print(chunk)
    print("----")
```


<CodeOutputBlock lang="python">

```default
    {'agent': {'messages': [AIMessage(content='Your name is Bob. How can I assist you further?', response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 154, 'total_tokens': 167}, 'model_name': 'gpt-4', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None}, id='run-e1181ba6-732d-4564-b479-9f1ab6bf01f6-0')]}}
    ----
```

</CodeOutputBlock>

–ü—Ä–∏–º–µ—Ä [—Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ LangSmith](https://smith.langchain.com/public/fa73960b-0f7d-4910-b73d-757a12f33b2b/r)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í–æ—Ç –∏ –≤—Å—ë! –í —ç—Ç–æ–º –±—ã—Å—Ç—Ä–æ–º —Å—Ç–∞—Ä—Ç–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–≥–æ –∞–≥–µ–Ω—Ç–∞. 
–ú—ã —Ç–∞–∫–∂–µ –ø–æ–∫–∞–∑–∞–ª–∏, –∫–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –≤ –ø–æ—Ç–æ–∫–æ–≤–æ–º —Ä–µ–∂–∏–º–µ ‚Äî –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —à–∞–≥–∏, –Ω–æ –∏ —Ç–æ–∫–µ–Ω—ã!
–ú—ã —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–ª–∏ –ø–∞–º—è—Ç—å, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –≤–µ—Å—Ç–∏ —Å –∞–≥–µ–Ω—Ç–æ–º –±–µ—Å–µ–¥—É.
–ê–≥–µ–Ω—Ç—ã ‚Äî —ç—Ç–æ —Å–ª–æ–∂–Ω–∞—è —Ç–µ–º–∞, –∏ –∑–¥–µ—Å—å –µ—Å—Ç—å –º–Ω–æ–≥–æ —á–µ–≥–æ –∏–∑—É—á–∏—Ç—å! 

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–≥–µ–Ω—Ç–∞—Ö, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π [LangGraph](/docs/concepts/#langgraph). –í –Ω–µ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.